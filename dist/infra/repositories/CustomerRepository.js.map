{"version":3,"sources":["C:\\Users\\Smile\\Desktop\\oi\\src\\infra\\repositories\\CustomerRepository.ts"],"sourcesContent":["import { eq } from \"drizzle-orm\";\r\nimport { Customer } from \"../../domain/entities/Customer\";\r\nimport { ICustomerRepository } from \"../../domain/repositories/ICustomerRepository\";\r\nimport { database as db } from \"../db/drizzle\"\r\nimport { tb_customers } from \"../db/schema\";\r\n\r\nexport class CustomerRepository implements ICustomerRepository {\r\n  async save(customer: Customer): Promise<Customer> {\r\n    await db.insert(tb_customers).values(customer)\r\n\r\n    return customer;\r\n  }\r\n\r\n  async removeById(id: string): Promise<string> {\r\n    await db.delete(tb_customers).where(eq(tb_customers.id, id))\r\n\r\n    return id\r\n  }\r\n\r\n  async findAll(): Promise<Customer[]> {\r\n    const customers = await db.select().from(tb_customers);\r\n    return customers; \r\n  }\r\n\r\n  async findById(id: string): Promise<Customer | undefined> {\r\n    const customer = await db.query.tb_customers.findFirst({where: eq(tb_customers.id, id)})\r\n    return customer\r\n  }\r\n\r\n  async findByEmail(email: string): Promise<Customer | undefined> {\r\n    const customer = await db.query.tb_customers.findFirst({where: eq(tb_customers.email, email)})\r\n    return customer\r\n  }\r\n}"],"names":["eq","database","db","tb_customers","CustomerRepository","save","customer","insert","values","removeById","id","delete","where","findAll","customers","select","from","findById","query","findFirst","findByEmail","email"],"mappings":"AAAA,SAASA,EAAE,QAAQ,cAAc;AAGjC,SAASC,YAAYC,EAAE,QAAQ,mBAAe;AAC9C,SAASC,YAAY,QAAQ,kBAAe;AAE5C,OAAO,MAAMC;IACX,MAAMC,KAAKC,QAAkB,EAAqB;QAChD,MAAMJ,GAAGK,MAAM,CAACJ,cAAcK,MAAM,CAACF;QAErC,OAAOA;IACT;IAEA,MAAMG,WAAWC,EAAU,EAAmB;QAC5C,MAAMR,GAAGS,MAAM,CAACR,cAAcS,KAAK,CAACZ,GAAGG,aAAaO,EAAE,EAAEA;QAExD,OAAOA;IACT;IAEA,MAAMG,UAA+B;QACnC,MAAMC,YAAY,MAAMZ,GAAGa,MAAM,GAAGC,IAAI,CAACb;QACzC,OAAOW;IACT;IAEA,MAAMG,SAASP,EAAU,EAAiC;QACxD,MAAMJ,WAAW,MAAMJ,GAAGgB,KAAK,CAACf,YAAY,CAACgB,SAAS,CAAC;YAACP,OAAOZ,GAAGG,aAAaO,EAAE,EAAEA;QAAG;QACtF,OAAOJ;IACT;IAEA,MAAMc,YAAYC,KAAa,EAAiC;QAC9D,MAAMf,WAAW,MAAMJ,GAAGgB,KAAK,CAACf,YAAY,CAACgB,SAAS,CAAC;YAACP,OAAOZ,GAAGG,aAAakB,KAAK,EAAEA;QAAM;QAC5F,OAAOf;IACT;AACF"}